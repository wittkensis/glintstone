/**
 * Dictionary Browse Component
 * Dictionary search bar, filters, results list, and word detail view
 * Dependencies: CSS variables from core.css
 */

/* ==========================================================================
   Dictionary Browse Mode
   ========================================================================== */

.dictionary-browse {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: 0;
    flex: 1; /* Changed from height: 100% to work with flex parent */
    min-height: 0; /* Required for flexbox scrolling to work */
    overflow: hidden;
}

.dictionary-search { /* TODO: Generalize to a full-bleed input style */
    position: relative;
    display: flex;
    align-items: center;
}

.dictionary-search__input {
    flex: 1;
    padding: var(--space-2) var(--space-3);
    padding-right: var(--space-8);
    background: var(--color-surface);
    border: 0 solid var(--color-border);
    border-bottom-width: 1px;
    border-radius: 0;
    color: var(--color-text);
    font-size: 0.9rem;
    transition: border-color var(--transition-fast);
    background: var(--color-bg);
}

.dictionary-search__input:focus {
    outline: none;
    border-color: var(--color-accent);
}

.dictionary-search__input::placeholder {
    color: var(--color-text-subtle);
}

.dictionary-search__clear {
    position: absolute;
    right: var(--space-2);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: 50%;
    color: var(--color-text-muted);
    cursor: pointer;
    font-size: 1.2rem;
    line-height: 1;
    transition: all var(--transition-fast);
}

.dictionary-search__clear:hover {
    background: var(--color-surface);
    color: var(--color-text);
}

.dictionary-filters {
    display: flex;
    gap: var(--space-2);
    padding: 0 var(--space-2);
}

.dictionary-filter__language,
.dictionary-filter__pos {
    flex: 1;
    width: 50%;
    padding: var(--space-2) var(--space-3);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    font-size: 0.85rem;
    cursor: pointer;
    transition: border-color var(--transition-fast);
}

.dictionary-filter__language:focus,
.dictionary-filter__pos:focus {
    outline: none;
    border-color: var(--color-accent);
}

.dictionary-filter-chips {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.dictionary-filter-chip {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-2);
    background: var(--color-accent);
    color: var(--color-bg);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
}

.dictionary-filter-chip__remove {
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: var(--color-bg);
    cursor: pointer;
    font-size: 0.9rem;
    line-height: 1;
    transition: background var(--transition-fast);
}

.dictionary-filter-chip__remove:hover {
    background: rgba(255, 255, 255, 0.3);
}

.dictionary-results {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    min-height: 0;
}

.dictionary-results__list {
    flex: 1;
    min-height: 0; /* Required for flexbox scrolling */
    overflow-y: auto;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background: var(--color-surface);
}

.dictionary-results__item {
    padding: var(--space-3);
    border-bottom: 1px solid var(--color-border);
    cursor: pointer;
    transition: background var(--transition-fast);
}

.dictionary-results__item:last-child {
    border-bottom: none;
}

.dictionary-results__item:hover {
    background: var(--color-bg);
}

.dictionary-results__item-headword {
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: var(--space-1);
    font-size: 0.95rem;
}

.dictionary-results__item-meta {
    font-size: 0.8rem;
    color: var(--color-text-muted);
}

.dictionary-results__loading,
.dictionary-results__empty,
.dictionary-results__error {
    padding: var(--space-8);
    text-align: center;
    color: var(--color-text-muted);
    font-size: 0.9rem;
}

.dictionary-results__error {
    color: var(--color-danger);
}

.dictionary-results__footer {
    flex-shrink: 0; /* Prevent footer from competing with list for flex space */
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2);
    background: var(--color-surface);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
}

.dictionary-results__count {
    font-size: 0.8rem;
    color: var(--color-text-muted);
}

.dictionary-results__load-more {
    padding: var(--space-1) var(--space-3);
    background: var(--color-accent);
    color: var(--color-bg);
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    cursor: pointer;
    transition: opacity var(--transition-fast);
}

.dictionary-results__load-more:hover {
    opacity: 0.9;
}

/* Dictionary Word Detail Mode */

.dictionary-word-detail {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: var(--space-3);
    height: 100%;
    overflow-y: auto;
}

.dictionary-word-detail__back {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-2);
    background: transparent;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    color: var(--color-text-muted);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all var(--transition-fast);
    align-self: flex-start;
}

.dictionary-word-detail__back:hover {
    background: var(--color-surface);
    color: var(--color-text);
    border-color: var(--color-accent);
}

.dictionary-word-detail__back svg {
    width: 14px;
    height: 14px;
}
